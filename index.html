<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Student Finance Manager</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
        }
        
        .tab {
            flex: 1;
            background: none;
            border: none;
            color: white;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .tab.active {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.3s ease;
            margin-right: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .expense-item, .goal-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .expense-meta {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .category-tag {
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
        }
        
        .amount {
            font-weight: 600;
            font-size: 18px;
        }
        
        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .card h3 {
            margin-bottom: 15px;
            color: #667eea;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: 600;
            color: #333;
        }
        
        .alert {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .alert.danger {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }
        
        .prediction {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì AI Student Finance Manager</h1>
            <p>Smart expense tracking with predictive analytics</p>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('expenses')">üí∞ Expenses</button>
            <button class="tab" onclick="showTab('goals')">üéØ Goals</button>
            <button class="tab" onclick="showTab('dashboard')">üìä Dashboard</button>
            <button class="tab" onclick="showTab('budget')">üí≥ Budget</button>
        </div>
        
        <!-- Expenses Tab -->
        <div id="expenses" class="tab-content active">
            <h2>Add New Expense</h2>
            <form id="expense-form">
                <div class="form-group">
                    <label>Description</label>
                    <input type="text" id="expense-desc" placeholder="What did you buy?" required>
                </div>
                <div class="form-group">
                    <label>Amount ($)</label>
                    <input type="number" id="expense-amount" step="0.01" placeholder="0.00" required>
                </div>
                <div class="form-group">
                    <label>Category (Auto-detected)</label>
                    <select id="expense-category">
                        <option value="food">üçï Food</option>
                        <option value="transport">üöó Transport</option>
                        <option value="books">üìö Books/Education</option>
                        <option value="entertainment">üé¨ Entertainment</option>
                        <option value="clothing">üëï Clothing</option>
                        <option value="health">üè• Health</option>
                        <option value="other">üîÑ Other</option>
                    </select>
                </div>
                <button type="submit" class="btn">Add Expense</button>
            </form>
            
            <h3>Recent Expenses</h3>
            <div id="expenses-list"></div>
        </div>
        
        <!-- Goals Tab -->
        <div id="goals" class="tab-content">
            <h2>Financial Goals</h2>
            <form id="goal-form">
                <div class="form-group">
                    <label>Goal Name</label>
                    <input type="text" id="goal-name" placeholder="e.g., New Laptop" required>
                </div>
                <div class="form-group">
                    <label>Target Amount ($)</label>
                    <input type="number" id="goal-amount" step="0.01" placeholder="0.00" required>
                </div>
                <div class="form-group">
                    <label>Monthly Contribution ($)</label>
                    <input type="number" id="goal-monthly" step="0.01" placeholder="0.00" required>
                </div>
                <button type="submit" class="btn">Add Goal</button>
            </form>
            
            <h3>Your Goals</h3>
            <div id="goals-list"></div>
        </div>
        
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content">
            <h2>Analytics Dashboard</h2>
            <div id="alerts"></div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <h3>Total Spent This Month</h3>
                    <div class="stat-value" id="total-spent">$0.00</div>
                </div>
                <div class="card">
                    <h3>Average Daily Spending</h3>
                    <div class="stat-value" id="avg-daily">$0.00</div>
                </div>
                <div class="card">
                    <h3>Top Category</h3>
                    <div class="stat-value" id="top-category">-</div>
                </div>
            </div>
            
            <div class="prediction" id="spending-prediction"></div>
            
            <div class="chart-container">
                <canvas id="spending-chart"></canvas>
            </div>
            
            <div class="chart-container">
                <canvas id="category-chart"></canvas>
            </div>
        </div>
        
        <!-- Budget Tab -->
        <div id="budget" class="tab-content">
            <h2>Budget Management</h2>
            <form id="budget-form">
                <div class="form-group">
                    <label>Monthly Budget ($)</label>
                    <input type="number" id="monthly-budget" step="0.01" placeholder="1000.00">
                </div>
                <div class="form-group">
                    <label>Category Budgets</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label>Food Budget ($)</label>
                            <input type="number" id="food-budget" step="0.01" placeholder="300.00">
                        </div>
                        <div>
                            <label>Transport Budget ($)</label>
                            <input type="number" id="transport-budget" step="0.01" placeholder="100.00">
                        </div>
                        <div>
                            <label>Entertainment Budget ($)</label>
                            <input type="number" id="entertainment-budget" step="0.01" placeholder="150.00">
                        </div>
                        <div>
                            <label>Books Budget ($)</label>
                            <input type="number" id="books-budget" step="0.01" placeholder="100.00">
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn">Update Budget</button>
            </form>
            
            <h3>Budget Overview</h3>
            <div id="budget-overview"></div>
        </div>
    </div>

    <script>
        // Data storage
        let expenses = [];
        let goals = [];
        let budget = {
            monthly: 1000,
            food: 300,
            transport: 100,
            entertainment: 150,
            books: 100,
            clothing: 100,
            health: 50,
            other: 200
        };

        // Auto-categorization AI
        function categorizeExpense(description) {
            const desc = description.toLowerCase();
            
            const categories = {
                food: ['food', 'restaurant', 'coffee', 'lunch', 'dinner', 'breakfast', 'pizza', 'burger', 'groceries', 'snack'],
                transport: ['uber', 'bus', 'train', 'gas', 'fuel', 'parking', 'taxi', 'metro', 'transport'],
                books: ['book', 'textbook', 'course', 'class', 'education', 'school', 'university', 'study'],
                entertainment: ['movie', 'netflix', 'game', 'concert', 'party', 'fun', 'entertainment', 'spotify'],
                clothing: ['shirt', 'pants', 'shoes', 'clothes', 'fashion', 'dress', 'jacket'],
                health: ['medicine', 'doctor', 'pharmacy', 'health', 'medical', 'hospital', 'clinic']
            };
            
            for (let category in categories) {
                if (categories[category].some(keyword => desc.includes(keyword))) {
                    return category;
                }
            }
            return 'other';
        }

        // Predictive spending analysis
        function predictSpending() {
            if (expenses.length < 3) return null;
            
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthlyExpenses = expenses.filter(exp => {
                const expDate = new Date(exp.date);
                return expDate.getMonth() === currentMonth && expDate.getFullYear() === currentYear;
            });
            
            if (monthlyExpenses.length === 0) return null;
            
            const totalThisMonth = monthlyExpenses.reduce((sum, exp) => sum + exp.amount, 0);
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const currentDay = new Date().getDate();
            const dailyAverage = totalThisMonth / currentDay;
            const predictedTotal = dailyAverage * daysInMonth;
            
            return {
                current: totalThisMonth,
                predicted: predictedTotal,
                dailyAverage: dailyAverage,
                daysRemaining: daysInMonth - currentDay
            };
        }

        // Show tab function
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'dashboard') {
                updateDashboard();
            } else if (tabName === 'budget') {
                updateBudgetOverview();
            }
        }

        // Expense form handler
        document.getElementById('expense-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const desc = document.getElementById('expense-desc').value;
            const amount = parseFloat(document.getElementById('expense-amount').value);
            
            // AI categorization
            const suggestedCategory = categorizeExpense(desc);
            document.getElementById('expense-category').value = suggestedCategory;
            
            const expense = {
                id: Date.now(),
                description: desc,
                amount: amount,
                category: document.getElementById('expense-category').value,
                date: new Date().toISOString().split('T')[0]
            };
            
            expenses.unshift(expense);
            this.reset();
            displayExpenses();
            checkBudgetAlerts();
        });

        // Goal form handler
        document.getElementById('goal-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const goal = {
                id: Date.now(),
                name: document.getElementById('goal-name').value,
                target: parseFloat(document.getElementById('goal-amount').value),
                monthly: parseFloat(document.getElementById('goal-monthly').value),
                saved: 0,
                created: new Date()
            };
            
            goals.push(goal);
            this.reset();
            displayGoals();
        });

        // Budget form handler
        document.getElementById('budget-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            budget.monthly = parseFloat(document.getElementById('monthly-budget').value) || budget.monthly;
            budget.food = parseFloat(document.getElementById('food-budget').value) || budget.food;
            budget.transport = parseFloat(document.getElementById('transport-budget').value) || budget.transport;
            budget.entertainment = parseFloat(document.getElementById('entertainment-budget').value) || budget.entertainment;
            budget.books = parseFloat(document.getElementById('books-budget').value) || budget.books;
            
            updateBudgetOverview();
            checkBudgetAlerts();
        });

        // Display expenses
        function displayExpenses() {
            const list = document.getElementById('expenses-list');
            list.innerHTML = expenses.map(exp => `
                <div class="expense-item">
                    <div>
                        <strong>${exp.description}</strong>
                        <div class="expense-meta">
                            <span class="category-tag">${exp.category}</span>
                            <span>${exp.date}</span>
                        </div>
                    </div>
                    <div>
                        <span class="amount">$${exp.amount.toFixed(2)}</span>
                        <button class="delete-btn" onclick="deleteExpense(${exp.id})">√ó</button>
                    </div>
                </div>
            `).join('');
        }

        // Display goals
        function displayGoals() {
            const list = document.getElementById('goals-list');
            list.innerHTML = goals.map(goal => {
                const monthsToTarget = Math.ceil(goal.target / goal.monthly);
                const progress = (goal.saved / goal.target) * 100;
                
                return `
                    <div class="goal-item">
                        <div style="flex: 1;">
                            <strong>${goal.name}</strong>
                            <div>Target: $${goal.target.toFixed(2)} | Monthly: $${goal.monthly.toFixed(2)}</div>
                            <div>Estimated completion: ${monthsToTarget} months</div>
                            <div class="progress-bar" style="margin-top: 10px;">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                        </div>
                        <button class="delete-btn" onclick="deleteGoal(${goal.id})">√ó</button>
                    </div>
                `;
            }).join('');
        }

        // Delete functions
        function deleteExpense(id) {
            expenses = expenses.filter(exp => exp.id !== id);
            displayExpenses();
        }

        function deleteGoal(id) {
            goals = goals.filter(goal => goal.id !== id);
            displayGoals();
        }

        // Update dashboard
        function updateDashboard() {
            const currentMonth = new Date().getMonth();
            const monthlyExpenses = expenses.filter(exp => 
                new Date(exp.date).getMonth() === currentMonth
            );
            
            const totalSpent = monthlyExpenses.reduce((sum, exp) => sum + exp.amount, 0);
            const avgDaily = monthlyExpenses.length > 0 ? totalSpent / new Date().getDate() : 0;
            
            // Category analysis
            const categoryTotals = {};
            monthlyExpenses.forEach(exp => {
                categoryTotals[exp.category] = (categoryTotals[exp.category] || 0) + exp.amount;
            });
            
            const topCategory = Object.keys(categoryTotals).reduce((a, b) => 
                categoryTotals[a] > categoryTotals[b] ? a : b, 'none'
            );
            
            document.getElementById('total-spent').textContent = `$${totalSpent.toFixed(2)}`;
            document.getElementById('avg-daily').textContent = `$${avgDaily.toFixed(2)}`;
            document.getElementById('top-category').textContent = topCategory.charAt(0).toUpperCase() + topCategory.slice(1);
            
            // Predictive analysis
            const prediction = predictSpending();
            if (prediction) {
                document.getElementById('spending-prediction').innerHTML = `
                    <h4>üîÆ AI Spending Prediction</h4>
                    <p>Based on your current spending pattern:</p>
                    <ul>
                        <li>Predicted month-end total: <strong>$${prediction.predicted.toFixed(2)}</strong></li>
                        <li>Daily average: <strong>$${prediction.dailyAverage.toFixed(2)}</strong></li>
                        <li>Budget utilization: <strong>${((prediction.predicted / budget.monthly) * 100).toFixed(1)}%</strong></li>
                    </ul>
                `;
            }
            
            // Update charts
            updateCharts(monthlyExpenses, categoryTotals);
        }

        // Update charts
        function updateCharts(monthlyExpenses, categoryTotals) {
            // Spending trend chart
            const ctx1 = document.getElementById('spending-chart').getContext('2d');
            const dailySpending = {};
            
            monthlyExpenses.forEach(exp => {
                const day = new Date(exp.date).getDate();
                dailySpending[day] = (dailySpending[day] || 0) + exp.amount;
            });
            
            new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: Object.keys(dailySpending).sort((a, b) => a - b),
                    datasets: [{
                        label: 'Daily Spending',
                        data: Object.keys(dailySpending).sort((a, b) => a - b).map(day => dailySpending[day]),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Daily Spending Trend'
                        }
                    }
                }
            });
            
            // Category pie chart
            const ctx2 = document.getElementById('category-chart').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(categoryTotals),
                    datasets: [{
                        data: Object.values(categoryTotals),
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
                            '#9966FF', '#FF9F40', '#FF6384', '#C9CBCF'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Spending by Category'
                        }
                    }
                }
            });
        }

        // Budget alerts
        function checkBudgetAlerts() {
            const currentMonth = new Date().getMonth();
            const monthlyExpenses = expenses.filter(exp => 
                new Date(exp.date).getMonth() === currentMonth
            );
            
            const totalSpent = monthlyExpenses.reduce((sum, exp) => sum + exp.amount, 0);
            const alerts = [];
            
            // Overall budget check
            if (totalSpent > budget.monthly * 0.8) {
                alerts.push({
                    type: 'danger',
                    message: `‚ö†Ô∏è You've spent $${totalSpent.toFixed(2)} (${((totalSpent/budget.monthly)*100).toFixed(1)}%) of your monthly budget!`
                });
            }
            
            // Category budget checks
            const categoryTotals = {};
            monthlyExpenses.forEach(exp => {
                categoryTotals[exp.category] = (categoryTotals[exp.category] || 0) + exp.amount;
            });
            
            Object.keys(categoryTotals).forEach(category => {
                if (budget[category] && categoryTotals[category] > budget[category] * 0.8) {
                    alerts.push({
                        type: 'warning',
                        message: `üí° ${category.charAt(0).toUpperCase() + category.slice(1)} spending is at ${((categoryTotals[category]/budget[category])*100).toFixed(1)}% of budget`
                    });
                }
            });
            
            // Predictive alerts
            const prediction = predictSpending();
            if (prediction && prediction.predicted > budget.monthly) {
                alerts.push({
                    type: 'danger',
                    message: `üìà AI Prediction: You're likely to exceed your budget by $${(prediction.predicted - budget.monthly).toFixed(2)} this month!`
                });
            }
            
            document.getElementById('alerts').innerHTML = alerts.map(alert => 
                `<div class="alert ${alert.type === 'danger' ? 'danger' : ''}">${alert.message}</div>`
            ).join('');
        }

        // Update budget overview
        function updateBudgetOverview() {
            const currentMonth = new Date().getMonth();
            const monthlyExpenses = expenses.filter(exp => 
                new Date(exp.date).getMonth() === currentMonth
            );
            
            const categoryTotals = {};
            monthlyExpenses.forEach(exp => {
                categoryTotals[exp.category] = (categoryTotals[exp.category] || 0) + exp.amount;
            });
            
            const overview = Object.keys(budget).filter(key => key !== 'monthly').map(category => {
                const spent = categoryTotals[category] || 0;
                const budgetAmount = budget[category];
                const percentage = (spent / budgetAmount) * 100;
                
                return `
                    <div class="card">
                        <h4>${category.charAt(0).toUpperCase() + category.slice(1)}</h4>
                        <div>Spent: $${spent.toFixed(2)} / $${budgetAmount.toFixed(2)}</div>
                        <div class="progress-bar" style="margin-top: 10px;">
                            <div class="progress-fill" style="width: ${Math.min(percentage, 100)}%; background: ${percentage > 80 ? '#dc3545' : '#667eea'}"></div>
                        </div>
                        <div style="margin-top: 5px; font-size: 14px;">${percentage.toFixed(1)}%</div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('budget-overview').innerHTML = `
                <div class="dashboard-grid">
                    ${overview}
                </div>
            `;
        }

        // Initialize app
        displayExpenses();
        displayGoals();
        updateDashboard();
        checkBudgetAlerts();
    </script>
</body>
</html>